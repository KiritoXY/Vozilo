import smtplib
from email.mime.text import MIMEText
class Vehicle:
   def __init__(self,list,region):
      self.regno=lists[0]
      self.make=lists[1]
      self.regdate=lists[2]
      self.engineno=lists[4]
      if(region == 'sindh'):
          self.TaxDate=lists[3]
          self.Safe=lists[5]
          self.body=lists[6]
          self.owner=lists[7]
          self.year=lists[8]
          self.CPLC=lists[9]
          self.seating=lists[10]
          self.cov=lists[11] #Class of vehicle = cov
          self.power=lists[12]
          self.remarks=lists[13]
      else:
          self.chasisno=lists[3]
          self.owner=lists[5]
          self.fatherr=lists[6]
          self.color=lists[7]
          self.CPLC=lists[8]
      if(self.CPLC != 'Vehicle is Clear'):
          self.alert(self.CPLC,region,self.regno)
   def alert(self,CPLC,region,regno):
      print('About to send')
      
      sender ='k163834@nu.edu.pk'
      receivers = ['k163834@nu.edu.pk']
      msg = MIMEText('The following vehicle has entered the parking lot whose CPLC is not clear\nRegistration Number:'+str(regno)
      +'\n\nKindly look into the matter'+'\n\n\n\n\nThis mail was automatically by the Vozilo Database')
      msg['Subject'] = 'Database Alert!'
      msg['From'] = 'Vozilo Database'
      msg['To'] = 'k163834@nu.edu.pk'
      mail = smtplib.SMTP('smtp.mailtrap.io',2525)
      mail.ehlo()
      mail.starttls()
      mail.login('394684280206b9','eda14f5e73f3a7')
      mail.sendmail(sender,receivers,msg.as_string())
      mail.close()
lists= []
for x in range(8):
    lists.append(x)
lists.append('Vehicle is not Clear')      
obj=Vehicle(lists,'KPK')
